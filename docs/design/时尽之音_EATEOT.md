# 时尽之音 / Everywhere at the End of Time

致敬 The Caretaker《Everywhere at the End of Time》的七咒联动饰品

## 核心概念

**散播遗忘的诅咒** - 你遗忘了世界，世界也遗忘了你。

内部 GameStage 系统，6阶段渐进式衰退，不可逆。Stage 6 结束 = 永久踢出游戏。

## 时间线（暂定）

| 阶段 | 持续时间（游戏日） | 累计 |
|-----|------------------|------|
| 1 | 20 | 20 |
| 2 | 20 | 40 |
| 3 | 15 | 55 |
| 4 | 15 | 70 |
| 5 | 10 | 80 |
| 6 | 50-100（可配置） | 130-180 |

## 代价效果（随阶段递增）

| 阶段 | 效果 | 实现难度 |
|-----|------|---------|
| 1 | 物品名字偶尔乱码，经验获取-20% | ⭐⭐ |
| 2 | 封锁2个背包格，移速-10% | ⭐⭐ |
| 3 | 物品贴图开始错乱，血条被overlay遮挡10% | ⭐⭐⭐⭐ |
| 4 | 封锁4个背包格+1饰品栏，最大血量-20%，部分实体渲染乱码 | ⭐⭐⭐⭐ |
| 5 | 敌人随机隐身（无声音无粒子），血条遮挡50%，移速-25% | ⭐⭐⭐⭐⭐ |
| 6 | 封锁半数格子，血量上限-50%，触发「清醒时刻」 | ⭐⭐⭐ |

### 效果详细难度

| 效果 | 难度 | 技术说明 |
|-----|------|---------|
| 经验获取削弱 | ⭐ | PlayerPickupXpEvent |
| 移速下降 | ⭐ | MOVEMENT_SPEED 属性 |
| 最大血量下降 | ⭐ | MAX_HEALTH 属性 |
| 封锁背包格 | ⭐⭐ | 阻止物品放入特定slot |
| 封锁饰品栏 | ⭐⭐ | Baubles API |
| 物品名字乱码 | ⭐⭐ | ItemTooltipEvent |
| 血条overlay遮挡 | ⭐⭐⭐ | RenderGameOverlayEvent |
| 物品贴图错乱 | ⭐⭐⭐⭐ | IBakedModel hook |
| 实体渲染乱码 | ⭐⭐⭐⭐ | RenderLivingEvent + shader |
| 敌人随机隐身 | ⭐⭐⭐⭐⭐ | ASM/Mixin 拦截声音、粒子、渲染 |

## 增益效果（随阶段递增）

| 阶段 | 增益 |
|-----|------|
| 1 | 仇恨值降低30% |
| 2 | 攻击附带「遗忘」- 敌人攻击力-25% |
| 3 | 受到伤害-20% |
| 4 | 攻击传染「混乱」- 敌人随机攻击友军 |
| 5 | 完全脱离仇恨列表 |
| 6 | 虚空共鸣 - 攻击无视护甲，伤害×2 |

## 「清醒时刻」- Stage 6 专属

致敬专辑最后那些突然浮现的美丽旋律碎片。

- 侵蚀值达到 Stage 6 末期时触发
- 持续30秒：所有debuff消失，所有增益翻倍
- 30秒后：阶段重置为1，但失去背包中随机3个物品

## 永久踢出实现方式（待定）

**方案A：存档标记**
- 存档被标记为「已被遗忘」
- 进入时只显示黑屏 + 文字，然后强制退出

**方案B：角色删除**
- 玩家数据清空，重新出生
- 世界保留

**方案C：完全删除**
- 存档直接删除（最hardcore）

## 开发顺序建议

### 第一批（快速出效果）
- 移速/血量/经验削弱
- 伤害增幅/减伤
- 物品名字乱码
- 封锁背包格

### 第二批（核心体验）
- 血条overlay
- 仇恨系统
- 敌人混乱

### 第三批（硬核表现）
- 物品贴图错乱
- 实体渲染乱码
- 完全隐身（ASM）

## 待决定

1. 增益效果的具体数值
2. "通关"的定义
3. 与诅咒数量如何联动
