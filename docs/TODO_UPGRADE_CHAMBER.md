# 升级仓系统设计备忘录

> 状态: 等待美术资源 (OBJ模型)
> 创建日期: 2025-12-15

## 核心概念

玩家升级机械核心模块时，必须进入**升级仓**并消耗大量能量，而非随时随地升级。

## 设计目标

1. 增加电量需求 - 解决"电量永远不缺"的问题
2. 增加升级仪式感
3. 让玩家需要规划升级时机
4. 增加基础设施建设的重要性

## 技术实现

### 需要的资源
- [ ] OBJ模型 (升级仓外观)
- [ ] 贴图材质
- [ ] 动画 (仓门开关、升级特效)

### 方块/结构
- TESR + OBJ 渲染
- 内置能量存储: 1,000,000 RF
- GUI界面: 选择升级模块

### 能量消耗公式
```
消耗 = 基础消耗 × 目标等级 × 模块系数 × 累计惩罚

基础消耗: 10,000 RF
模块系数:
  - 战斗类: ×2.0
  - 发电类: ×1.5
  - 辅助类: ×1.0
  - 生存类: ×1.2
累计惩罚: 总等级 > 30 时 +20%
```

### 示例消耗表
| 升级操作 | 消耗 |
|---------|------|
| 速度 Lv1→2 | 20,000 RF |
| 飞行 Lv1→2 | 40,000 RF |
| 速度 Lv4→5 | 50,000 RF |
| 高等级(30+) | +20% |

## 可选扩展功能

- 升级失败几率 (能量不足时)
- 冷却时间 (每次升级后)
- 升级仓等级 (低级仓不能升高级模块)
- 玩家躺入动画

## 相关文件

实现时可能需要修改/参考:
- `EnergyBalanceConfig.java` - 能量配置
- `ItemMechanicalCore.java` - 机械核心
- `UpgradeManager.java` - 升级管理

## 备注

这个系统也可以复用之前讨论的"手术仓"概念 - 玩家右键放入模块后躺入，仓门关闭，接受改造。
